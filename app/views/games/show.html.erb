<div class="container">
  <div class="row">
    <h1><%=@game.name%></h1>
   <div class="row-row mb-5">
      <div class="col-lg-9 col-sm-12 text-center">
        <div class="information">
          <div class="image-left">
            <%=cl_image_tag @game.photo.key, class:"game-image"%>
          </div>
          <div class="description">
          <div class="elements-right">
              <div class="details">
                <div class="detail">
                  <i class="fas fa-coins"></i>
                  <p><%=@game.price%>$</p>
                </div>
                <div class="detail">
                  <i class="fas fa-user-friends"></i>
                  <p><%=@game.min_player%>-<%=@game.max_player%> players</p>
                </div>
                <div class="detail">
                  <i class="fas fa-clock"></i>
                  <p><%=@game.playtime%> mins</p>
                </div>
              </div>
              <div class="description">
              <div class="description-title">
                  <h2>Description</h2>
              </div>
              <div class="game-description">
                <p><%= @game.description%></p>
              </div>
              </div>
          </div>
          </div>
        </div>
      </div>

      <div class="col-lg-3 col-sm-12">
        <div class="form-date">
          <p><strong><%= @game.price%></strong> / night</p>
          <div data-controller="flatpicker" data-flatpicker-target="bookings" data-flatpicker-bookings-value="<%= @booking_json.to_json%>">
            <%= simple_form_for [@game, @booking] do |f| %>
              <%= f.input :date_begin, as: :string, required: false, input_html: { data: { flatpicker_target: "start" } } %>
              <%= f.input :date_end, as: :string, required: false, input_html: { data: { flatpicker_target: "end" } } %>
              <%= f.button :submit, "Book", class: "btn-submit mt-2" %>
            <% end %>
          </div>
        </div>

      </div>

   </div>
  </div>

  <div class="review border-top pt-2">
    <div class="row">
      <div class="col-lg-8 col-sm-12">
        <div class="all-reviews">
          <div class="title-review">
            <h3>Reviews</h3>
            <div class ="stars-rating-review">
              <i class="fas fa-star"></i>
              <p><%= @average_stars %></p>
            </div>
          </div>
          <%@reviews.each do |review|%>
            <div class="content-review">
              <p class="user-name"><%=review.user.name%></p>
              <p class="created-review"><%=review.created_at%></p>
              <p class="description-review"><%= review.content%></p>
              <div class="stars-rating">
                <%review.stars.round.times do%>
                  <i class="fas fa-star"></i>
                <%end%>
                <%(5 - review.stars.round).times do%>
                  <i class="far fa-star"></i>
                <%end%>
              </div>
            </div>
          <%end%>
        </div>
      </div>


      <div class="col-lg-4 col-sm-12" data-controller="availablereview" data-availablereview-reviews-value="<%= @review_availablility%>">
        <div class="add-review" data-controller="review" data-availablereview-target="form">
          <%= simple_form_for [@game, @review] do |f|%>
            <%= f.input :content%>
            <%= f.input :stars, collection: 1..5%>
            <%= f.submit class: "btn-submit mt-2" %>
          <%end%>
        </div>

        <div class="invailable-review d-none" data-availablereview-target="sorrymessage">
          <p> Sorry ðŸ˜” You can't review a game twice ...</p>
        </div>

      </div>
    </div>
  </div>


  <div style="width: 100%; height: 300px;"
    data-controller="mapbox"
    data-mapbox-markers-value="<%= @marker.to_json %>"
    data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
    class="my-5">
  </div>



</div>
<%# <%= cl_image_tag("ydqbpxoslrtixlkkyair",
       width: 400, height: 300, crop: :fill) %>
